vpc_name = "{{ vpc }}"
vpc_cidr_block = "{{ vpc_cidr_block }}"

admin_ips = "{{ admin_ips }}"

{% set public_cidr_block_default_a = vpc_cidr_block | ipsubnet(27, 80) -%}
{% set public_cidr_block_default_b = vpc_cidr_block | ipsubnet(27, 81) -%}
{% set public_cidr_block_default_c = vpc_cidr_block | ipsubnet(27, 82) -%}
{% set public_cidr_block_defaults = [
  public_cidr_block_default_a,
  public_cidr_block_default_b,
  public_cidr_block_default_c 
  ] | join(' ') -%}
public_cidr_block = "{{ public_cidr_block | default(public_cidr_block_defaults) }}"
{% set indexer_cidr_block_defaults = vpc_cidr_block | ipsubnet(27, 320) -%}
indexer_cidr_block = "{{ indexer_cidr_block | default(indexer_cidr_block_defaults) }}"

{% set presentation_cidr_block_default_a = vpc_cidr_block | ipsubnet(24, 21) -%}
{% set presentation_cidr_block_default_b = vpc_cidr_block | ipsubnet(24, 22) -%}
{% set presentation_cidr_block_default_c = vpc_cidr_block | ipsubnet(24, 23) -%}
{% set presentation_cidr_block_defaults = [
  presentation_cidr_block_default_a, 
  presentation_cidr_block_default_b, 
  presentation_cidr_block_default_c 
  ] | join(' ') -%}
presentation_cidr_block = "{{ presentation_cidr_block | default(presentation_cidr_block_defaults) }}"
{% set presentation_database_cidr_block_default_a = vpc_cidr_block | ipsubnet(27, 160) -%}
{% set presentation_database_cidr_block_default_b = vpc_cidr_block | ipsubnet(27, 161) -%}
{% set presentation_database_cidr_block_default_c = vpc_cidr_block | ipsubnet(27, 162) -%}
{% set presentation_database_cidr_block_defaults = [
  presentation_database_cidr_block_default_a, 
  presentation_database_cidr_block_default_b, 
  presentation_database_cidr_block_default_c 
  ] | join(' ') -%}
presentation_database_cidr_block = "{{ presentation_database_cidr_block | default(presentation_database_cidr_block_defaults) }}"

presentation_database_class_instance = "{{ presentation_database_class_instance | default('db.m3.large') }}"
